{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet currentPage = 1;\nlet searchQuery = '';\nconst perPage = 40;\n\nhideLoader();\n\nconst options = {\n  captionsData: 'alt',\n  captionsDelay: 250,\n};\nconst lightbox = new SimpleLightbox('.image-card', options);\n\nconst form = document.querySelector('form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nhideLoadMoreButton();\n\nform.addEventListener('submit', function (event) {\n  event.preventDefault();\n  searchQuery = document.querySelector('input').value.trim();\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter a search query.',\n    });\n    return;\n  }\n  showLoader();\n  currentPage = 1;\n  searchImages(searchQuery, currentPage)\n    .then(data => {\n      hideLoader();\n      if (data.hits.length > 0) {\n        displayImages(data.hits);\n        lightbox.refresh();\n        showLoadMoreButton();\n      } else {\n        showNoResultsMessage();\n        clearImages();\n        hideLoadMoreButton();\n      }\n    })\n    .catch(error => {\n      hideLoader();\n      console.error('Error fetching images:', error.message);\n      iziToast.error({\n        title: 'Error',\n        message: 'An error occurred while fetching images. Please try again.',\n      });\n    });\n});\n\nloadMoreButton.addEventListener('click', function () {\n  showLoader();\n  currentPage++;\n  searchImages(searchQuery, currentPage)\n    .then(data => {\n      hideLoader();\n      if (data.totalHits > 0) {\n        appendImages(data.hits);\n        lightbox.refresh();\n        scrollToNextGroup();\n        if (data.totalHits <= currentPage * perPage) {\n          hideLoadMoreButton();\n          showEndMessage();\n        }\n      } else {\n        hideLoadMoreButton();\n        showEndMessage();\n      }\n    })\n    .catch(error => {\n      hideLoader();\n      console.error('Error fetching more images:', error.message);\n      iziToast.error({\n        title: 'Error',\n        message:\n          'An error occurred while fetching more images. Please try again.',\n      });\n    });\n});\n\nfunction searchImages(query, page) {\n  const apiKey = '42011600-6d993b5d4f0ba2a9af1a5ffd0';\n  const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&pretty=true&page=${page}&per_page=${perPage}`;\n\n  return axios.get(apiUrl).then(response => {\n    if (response.status !== 200) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n    return response.data;\n  });\n}\n\nfunction displayImages(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n  const ul = document.createElement('ul');\n  ul.className = 'image-list';\n\n  const imageMarkup = images\n    .map(\n      image => `\n      <li class=\"image-item\">\n        <a href=\"${image.largeImageURL}\" class=\"image-card\">\n          <div class=\"image-container\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          </div>\n          <div class=\"image-info\">\n            <span><span class=\"label\">Likes</span> ${image.likes}</span>\n            <span><span class=\"label\">Views</span> ${image.views}</span>\n            <span><span class=\"label\">Comments</span> ${image.comments}</span>\n            <span><span class=\"label\">Downloads</span> ${image.downloads}</span>\n          </div>\n        </a>\n      </li>\n    `\n    )\n    .join('');\n\n  ul.innerHTML = imageMarkup;\n  gallery.appendChild(ul);\n}\n\nfunction appendImages(images) {\n  const gallery = document.querySelector('.gallery');\n  const ul = gallery.querySelector('.image-list');\n\n  const imageMarkup = images\n    .map(\n      image => `\n        <li class=\"image-item\">\n          <a href=\"${image.largeImageURL}\" class=\"image-card\">\n            <div class=\"image-container\">\n              <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </div>\n            <div class=\"image-info\">\n              <span><span class=\"label\">Likes</span> ${image.likes}</span>\n              <span><span class=\"label\">Views</span> ${image.views}</span>\n              <span><span class=\"label\">Comments</span> ${image.comments}</span>\n              <span><span class=\"label\">Downloads</span> ${image.downloads}</span>\n            </div>\n          </a>\n        </li>\n      `\n    )\n    .join('');\n\n  ul.insertAdjacentHTML('beforeend', imageMarkup);\n}\n\nfunction clearImages() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nfunction showLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  loader.style.display = 'none';\n}\n\nfunction showNoResultsMessage() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nfunction showLoadMoreButton() {\n  loadMoreButton.style.visibility = 'visible';\n}\n\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.visibility = 'hidden';\n}\n\nfunction showEndMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: 'We are sorry, but you have reached the end of search results.',\n  });\n}\n\nfunction scrollToNextGroup() {\n  const cardHeight = document\n    .querySelector('.image-card')\n    .getBoundingClientRect().height;\n\n  const numberOfCardsToScroll = 4;\n\n  const currentPosition = window.scrollY;\n  const targetPosition = currentPosition + cardHeight * numberOfCardsToScroll;\n\n  window.scrollTo({\n    top: targetPosition,\n    behavior: 'smooth',\n  });\n}\n"],"names":["currentPage","searchQuery","perPage","hideLoader","options","lightbox","SimpleLightbox","form","loadMoreButton","hideLoadMoreButton","event","iziToast","showLoader","searchImages","data","displayImages","showLoadMoreButton","showNoResultsMessage","clearImages","error","appendImages","scrollToNextGroup","showEndMessage","query","page","apiUrl","axios","response","images","gallery","ul","imageMarkup","image","loader","cardHeight","numberOfCardsToScroll","targetPosition"],"mappings":"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"}